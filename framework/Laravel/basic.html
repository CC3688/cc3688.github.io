<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>basic | CC3688 blog</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/assets/css/0.styles.1b5c6595.css" as="style"><link rel="preload" href="/assets/js/app.a6f4ab66.js" as="script"><link rel="preload" href="/assets/js/2.f625eefe.js" as="script"><link rel="preload" href="/assets/js/19.8d2fc15a.js" as="script"><link rel="prefetch" href="/assets/js/10.9276f3bc.js"><link rel="prefetch" href="/assets/js/11.b682676a.js"><link rel="prefetch" href="/assets/js/12.e93f1a58.js"><link rel="prefetch" href="/assets/js/13.ff2d0c7f.js"><link rel="prefetch" href="/assets/js/14.716ef476.js"><link rel="prefetch" href="/assets/js/15.11d13f21.js"><link rel="prefetch" href="/assets/js/16.80b27c51.js"><link rel="prefetch" href="/assets/js/17.6ec37bb7.js"><link rel="prefetch" href="/assets/js/18.e5140498.js"><link rel="prefetch" href="/assets/js/20.9dfc8cb1.js"><link rel="prefetch" href="/assets/js/21.968206ca.js"><link rel="prefetch" href="/assets/js/22.fd9cc967.js"><link rel="prefetch" href="/assets/js/23.78ac1ef1.js"><link rel="prefetch" href="/assets/js/24.5a15428a.js"><link rel="prefetch" href="/assets/js/25.0be1f1b3.js"><link rel="prefetch" href="/assets/js/26.f2dbaacd.js"><link rel="prefetch" href="/assets/js/27.4561bf7e.js"><link rel="prefetch" href="/assets/js/28.d5bea492.js"><link rel="prefetch" href="/assets/js/29.ca209f36.js"><link rel="prefetch" href="/assets/js/3.38bbb77e.js"><link rel="prefetch" href="/assets/js/30.c1ad3505.js"><link rel="prefetch" href="/assets/js/31.c4df77ed.js"><link rel="prefetch" href="/assets/js/32.7b022086.js"><link rel="prefetch" href="/assets/js/33.185e3058.js"><link rel="prefetch" href="/assets/js/34.88ad89a7.js"><link rel="prefetch" href="/assets/js/35.5f474969.js"><link rel="prefetch" href="/assets/js/36.74cf0014.js"><link rel="prefetch" href="/assets/js/37.19dcdb61.js"><link rel="prefetch" href="/assets/js/38.b6e774d4.js"><link rel="prefetch" href="/assets/js/39.82ae4f31.js"><link rel="prefetch" href="/assets/js/4.97b1d945.js"><link rel="prefetch" href="/assets/js/40.ac4f32e6.js"><link rel="prefetch" href="/assets/js/41.626b10b0.js"><link rel="prefetch" href="/assets/js/42.df5b38df.js"><link rel="prefetch" href="/assets/js/5.63cb3433.js"><link rel="prefetch" href="/assets/js/6.b980b232.js"><link rel="prefetch" href="/assets/js/7.71f0bb8f.js"><link rel="prefetch" href="/assets/js/8.14ca92de.js"><link rel="prefetch" href="/assets/js/9.68af55ab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1b5c6595.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CC3688 blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/JS/" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/TS/" class="nav-link">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/tools/" class="nav-link">
  tools
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/backend/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/backend/Python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/backend/MySQL/" class="nav-link">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/framework/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/framework/Laravel/" class="nav-link router-link-active">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/framework/Django/" class="nav-link">
  Django
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/jingguan/" class="nav-link">
  经管
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/JS/" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/TS/" class="nav-link">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/tools/" class="nav-link">
  tools
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/backend/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/backend/Python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/backend/MySQL/" class="nav-link">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/framework/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/framework/Laravel/" class="nav-link router-link-active">
  Laravel
</a></li><li class="dropdown-item"><!----> <a href="/framework/Django/" class="nav-link">
  Django
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/jingguan/" class="nav-link">
  经管
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/framework/Laravel/" class="sidebar-link">Laravel</a></li><li><a href="/framework/Laravel/basic.html" class="active sidebar-link">basic</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framework/Laravel/basic.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/framework/Laravel/basic.html#csrf攻击-跨站请求伪造" class="sidebar-link">CSRF攻击, 跨站请求伪造</a></li><li class="sidebar-sub-header"><a href="/framework/Laravel/basic.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/framework/Laravel/basic.html#控制器" class="sidebar-link">控制器</a></li><li class="sidebar-sub-header"><a href="/framework/Laravel/basic.html#请求" class="sidebar-link">请求</a></li><li class="sidebar-sub-header"><a href="/framework/Laravel/basic.html#响应" class="sidebar-link">响应</a></li><li class="sidebar-sub-header"><a href="/framework/Laravel/basic.html#视图" class="sidebar-link">视图</a></li><li class="sidebar-sub-header"><a href="/framework/Laravel/basic.html#表单验证" class="sidebar-link">表单验证</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="basic"><a href="#basic" class="header-anchor">#</a> basic</h1> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <div class="language- extra-class"><pre class="language-text"><code>composer create-project --prefer-dist laravel/laravel=5.6.* projectName

// projectName 是你指定的项目名

// 数据库,laravel 5.4 后为了支持emoji表情,默认使用utf8mb4, 如果mysql低于5.7.7会报错
// 可以这样做:     https://baijunyao.com/article/137
//找到 appProvidersAppServiceProvider.php 文件；
//先 use Schema；
use Illuminate\Support\Facades\Schema;

// 在 boot 中添加如下代码;
public function boot()
{
    Schema::defaultStringLength(191);
}

</code></pre></div><h2 id="csrf攻击-跨站请求伪造"><a href="#csrf攻击-跨站请求伪造" class="header-anchor">#</a> CSRF攻击, 跨站请求伪造</h2> <p>定义在routes/web.php文件中的路由，默认就有了csrf验证功能。</p> <p>但并不是所有请求都需要避免CSRF攻击，比如去第三方API获取数据的请求。</p> <p>可以通过在VerifyCsrfToken（app/Http/Middleware/VerifyCsrfToken.php）</p> <p>中间件中将要排除的请求URL添加到$except属性数组中。</p> <h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <h4 id="基本定义"><a href="#基本定义" class="header-anchor">#</a> 基本定义</h4> <div class="language- extra-class"><pre class="language-text"><code>Route::请求方式('uri',匿名函数);
Route::请求方式('uri','控制器名称@操作方法');

#从服务器取出资源（一项或多项） select 
Route::get($uri, $callback);

#在服务器新建一个资源 insert
Route::post($uri, $callback);

#在服务器更新资源  update
Route::put/patch($uri, $callback);

#从服务器删除资源 delete
Route::delete($uri, $callback);

#4种基础路由中，只有GET请求方式不进行CSRF验证，其它请求方式则需要CSRF验证

</code></pre></div><h4 id="路由一般需要传参-及使用命名路由"><a href="#路由一般需要传参-及使用命名路由" class="header-anchor">#</a> 路由一般需要传参,及使用命名路由</h4> <div class="language- extra-class"><pre class="language-text"><code>Route::get('URL/{参数名称?}','闭包函数或控制器响应方法标识')-&gt;where(['参数名称'=&gt;'正则'])-&gt;name('名字');

// 注意,参数需要用 {}  包裹起来
// 加问号表示,可选, 不加就是必填
// where 是对参数进行限制
// name 是对路由 命名
//  where name 根据需要使得

// 生成路由, 如视图里
$url = route('路由名字')
</code></pre></div><h4 id="路由分组-前缀"><a href="#路由分组-前缀" class="header-anchor">#</a> 路由分组 前缀</h4> <div class="language- extra-class"><pre class="language-text"><code>//分组中还可以进行分组,无限制去分组下去，当然不建议无限制的分组下去,一般2到3级就可以了。
Route::group(['prefix' =&gt; 'admin'], function () {
    Route::get('users', function ()    {
        // 匹配 &quot;/admin/users&quot; URL
    });
});

</code></pre></div><h4 id="查看定义好的路由"><a href="#查看定义好的路由" class="header-anchor">#</a> 查看定义好的路由</h4> <div class="language- extra-class"><pre class="language-text"><code>&gt; php artisan route:list
</code></pre></div><h2 id="控制器"><a href="#控制器" class="header-anchor">#</a> 控制器</h2> <h4 id="生成控制器"><a href="#生成控制器" class="header-anchor">#</a> 生成控制器</h4> <p>使用大驼峰命名，同时注意命名空间和基类控制器的引入, 控制名,可以带路径
一般应用分前台,后台,则可以带一下 Admin  Home</p> <div class="language- extra-class"><pre class="language-text"><code>// 一般控制器
&gt; php artisan make:controller ControllerNameController

// 资源控制器
&gt; php artisan make:controller ControllerNameController -r [--resource]
</code></pre></div><h4 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h4> <div class="language- extra-class"><pre class="language-text"><code>Route::请求方法(URI,'[命名空间\]控制器类名@方法名')
</code></pre></div><h2 id="请求"><a href="#请求" class="header-anchor">#</a> 请求</h2> <p>####　Request 获取数据</p> <p><strong>以一个依赖注入的方式，帮我们实例获取对象</strong></p> <div class="language- extra-class"><pre class="language-text"><code>use Illuminate\Http\Request;

// 方法里
function public method (Request $request)
{
       // 获取指定字段, 这里的get是获得的意思,是$request提供的方法,和请求方法get post 无关系
        $username = $request-&gt;get('username', null);
        $password = $request-&gt;get('password', null);

        //获取全部
        $request-&gt;all();

        //指定获取的字段列表,白名单
        $request-&gt;only(['username', 'password']);

        //排除不要的字段,黑名单
        $request-&gt;except(['age']);

        //判断一个字段是否存在
        $request-&gt;has('sex');

        //判断请求的类型 get  post  put delete  http请求的类型
        $request-&gt;isMethod('post');

        //$request类还可以获取cookie  和文件上传
        //以上这些方法都有返回值,可以用个变量存起来

}


</code></pre></div><p><strong>辅助函数方式获取request()</strong></p> <div class="language- extra-class"><pre class="language-text"><code>// 方法里
function public method (Request $request)
{
   request()-&gt;all();
   request()-&gt;isMethod('post');
}
</code></pre></div><h2 id="响应"><a href="#响应" class="header-anchor">#</a> 响应</h2> <p>当服务器收到浏览器的请求后, 会发送响应消息给浏览器</p> <h4 id="返回字符串"><a href="#返回字符串" class="header-anchor">#</a> 返回字符串</h4> <div class="language- extra-class"><pre class="language-text"><code>// 在控制器或路由里  echo  或 return  一个字符串就可以了
return &quot;Hello world&quot;;

</code></pre></div><h4 id="设置cookie"><a href="#设置cookie" class="header-anchor">#</a> 设置cookie</h4> <p>cookie 是加密的</p> <p>response 辅助函数</p> <div class="language- extra-class"><pre class="language-text"><code>// 设置
return response('')-&gt;cookie('id', 111,10, '/');

// cookie($name, $value, $minutes, $path, $domain, $secure, $httpOnly)

//读cookie
echo request()-&gt;cookie('id');
</code></pre></div><h4 id="重定向"><a href="#重定向" class="header-anchor">#</a> 重定向</h4> <div class="language- extra-class"><pre class="language-text"><code>return redirect()-&gt;route('路由别名');
</code></pre></div><h4 id="json-数据返回"><a href="#json-数据返回" class="header-anchor">#</a> json 数据返回</h4> <div class="language- extra-class"><pre class="language-text"><code>return response()-&gt;json([
    'name' =&gt; 'yycu',
    'age' =&gt; 22
])
</code></pre></div><h2 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h2> <p>视图的用途是用来存放应用程序中 HTML 内容，并且能够将你的控制器层与展示层分开。
我们在控制器中使用助手函数 view() 来加载视图模板。</p> <h4 id="分配数据到模板"><a href="#分配数据到模板" class="header-anchor">#</a> 分配数据到模板</h4> <div class="language- extra-class"><pre class="language-text"><code>view(模板文件名称, 关联数组);
view(模板文件名称, compact('变量名1', '变量名2'));  //变量名是一个 字符串变量名, 不用 $ 
view(模板文件名称)-&gt;with(关联数组)

//控制器
 
 $data = ['id'=&gt;11, 'name'=&gt; 'yycu'];

 return view('index', $data);
 return view('index', compact('data'));
 return view('index')-&gt;width(['data'=&gt; $data]);

 //视图

 &lt;p&gt;{{$data['id']}}&lt;/p&gt;
 &lt;p&gt;{{$data['name']}}&lt;/p&gt;
</code></pre></div><h4 id="模板中输出变量"><a href="#模板中输出变量" class="header-anchor">#</a> 模板中输出变量</h4> <div class="language- extra-class"><pre class="language-text"><code>//1 变量
{{$变量名}}
例
{{$name}}


// 2 三元运算
{{ $name or 'Default' }} 等价于&lt;?php echo isset( $name)?$name:'default'?&gt;


// 3 未转义输出
//变量信息里边如果有html标记信息，在输出的时候html标记被转化为符号实体了，
//而没有被浏览器解析掉，如果希望看到被浏览器解析后的内容，就需要设置两个感叹号
// $title = &quot;&lt;a href='http://www.baidu.com'&gt;百度&lt;/a&gt;&quot;;

{!!$变量!!}

//4 原始形态输出
//由于很多 JavaScript 框架都使用花括号来表明所提供的表达式，所以你可以使用
// @ 符号来告知 Blade 渲染引擎你需要保留这个表达式原始形态。
&lt;h1&gt;Laravel&lt;/h1&gt;
Hello, @{{ $变量名 }}


//5使用函数名

{{phpFunctionName()}}


//6 if语名

@if (count($records) === 1)
    我有一条记录！
@elseif (count($records) &gt; 1)
    我有多条记录！
@else
    我没有任何记录！
@endif


//7 循环
@foreach ($users as $key=&gt;$user)

    &lt;p&gt;此用户为 {{ $user-&gt;id }}&lt;/p&gt;
    # 如果传过来的就是数组那么我们就用
    &lt;p&gt;{{ $user['id'] }}&lt;/p&gt;

@endforeach
---------------------------------------
@forelse ($users as $key=&gt;$user)
    &lt;li&gt;{{ $user-&gt;name }}&lt;/li&gt;
    # 如果传过来的就是数组那么我们就用
    &lt;p&gt;{{ $user['id'] }}&lt;/p&gt;
@empty
    &lt;p&gt;没有用户&lt;/p&gt;
@endforelse

注：foreach有循环变量，$loop，$loop-&gt;index	当前循环所迭代的索引，起始为 0。
foreach和forelse 在确定有数据的时候，我们就用foreach
在不确定是否有数据的时候，我们就用forelse


//8 模板包含
@include('public.header')
# public 表示 views下面的public目录
# header 表示在views/public/header.blade.php文件

//9 模板定义  留坑
&lt;title&gt;@yield('title')&lt;/title&gt;
&lt;body&gt;
    @yield('content')
    &lt;p&gt;&lt;p&gt;
&lt;/body&gt;

//9 模板继承  填坑
@extends('laoyouts.home') #表示继承resource/views/layouts/home.blade.php布局文件
    使用section标签替换布局模板中可变区域；

@section('title', '我是title'); //用法1 

@section('content')              // 用法2
    @section  到 @endsection 之前的内容 填充
	给布局文件yield('content ')的区域进行填充的内容
@endsection


</code></pre></div><h2 id="表单验证"><a href="#表单验证" class="header-anchor">#</a> 表单验证</h2> <p>表单验证是为了防止访问者跳过客户端验证而造成的系统安全问题，
一但非法用户绕过客户端验证而服务器端没有加以验证，这样就是很不安全了，
所以项目必须要进行服务器端表单验证。
Laravel 提供了多种不同的验证方法来对应用程序传入的数据进行验证。</p> <table><thead><tr><th>规则名</th> <th>说明</th></tr></thead> <tbody><tr><td>required</td> <td>不能为空</td></tr> <tr><td>max:value</td> <td>字段值必须小于或等于value,对于字符串来说，value 为字符数</td></tr> <tr><td>min:value</td> <td>字段值必须大于或等于value,对于字符串来说，value 为字符数</td></tr> <tr><td>email</td> <td>验证邮箱是否合法</td></tr> <tr><td>url</td> <td>验证字段必需是有效的 URL 格式</td></tr> <tr><td>confirmed</td> <td>验证两个字段是否相同，如果验证的字段是password,则必须输入一个与之匹配的password_confirmation字段</td></tr> <tr><td>integer</td> <td>验证字段必须是整型</td></tr> <tr><td>ip</td> <td>验证字段必须是IP地址</td></tr> <tr><td>numeric</td> <td>验证字段必须是数值</td></tr> <tr><td>size:value</td> <td>value 验证字段必须有和给定值value想匹配的尺寸，对字符串而言，value是相应的字符数目，对数值而言，value是给定整型值；对文件而言，value是相应的文件字节数</td></tr> <tr><td>string</td> <td>验证字段必须是字符串</td></tr> <tr><td>unique</td> <td>表名，字段，需要排除的ID</td></tr> <tr><td>between:min,max</td> <td>验证字段值的大小是否介于指定的 min 和 max 之间。字符串、数值或是文件大小的计算方式和 size 规则相同</td></tr></tbody></table> <h4 id="添加用户验证"><a href="#添加用户验证" class="header-anchor">#</a> 添加用户验证</h4> <p>表单验证前,要对表单的csrf验证加以处理</p> <div class="language- extra-class"><pre class="language-text"><code>// laravel写法

{{ csrf_token() }} 只生成token值没有html代码          场景  ajax
{{ csrf_field() }} 生成了token同时还生成了html代码    场景  一般的表单提交

//laravel5.6之后我们对
{{ csrf_field() }} 对它还可以简写  @csrf

</code></pre></div><h4 id="_1-在控制器中的-this-validate-方式验证表单"><a href="#_1-在控制器中的-this-validate-方式验证表单" class="header-anchor">#</a> 1 在控制器中的 $this-&gt;validate 方式验证表单</h4> <div class="language- extra-class"><pre class="language-text"><code> $input = $this-&gt;validate($request, [

 ],[
     
 ])
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/framework/Laravel/" class="prev router-link-active">
        Laravel
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a6f4ab66.js" defer></script><script src="/assets/js/2.f625eefe.js" defer></script><script src="/assets/js/19.8d2fc15a.js" defer></script>
  </body>
</html>
